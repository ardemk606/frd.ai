# Src Module - FastAPI Application

## Назначение (Purpose)

Модуль `src` содержит основное веб-приложение платформы **FRD.ai**, построенное на фреймворке **FastAPI**. Этот компонент отвечает за весь синхронный API, через который внешние клиенты взаимодействуют с системой.

Его ключевые задачи:
-   Принимать HTTP-запросы.
-   Проводить быструю валидацию данных с помощью моделей Pydantic.
-   Выполнять легковесные операции (например, запись метаданных в PostgreSQL).
-   Ставить "тяжелые", длительные задачи в очереди Celery для асинхронной обработки модулем `worker`.

## Основные компоненты (Core Components)

### 1. `server.py`
-   **Описание:** Точка входа в приложение. Здесь создается экземпляр `FastAPI`, подключаются все роутеры и настраиваются обработчики событий (например, `startup`, `shutdown`).

### 2. `routers/`
-   **Описание:** Этот каталог содержит все API-эндпоинты (контроллеры), сгруппированные по доменной области.
    -   `health.py`: Эндпоинт для проверки состояния сервиса (`/health`).
    -   `upload.py`: Эндпоинт для загрузки "seed" датасетов.
    -   `projects.py`: Эндпоинты для управления проектами и датасетами (например, запуск генерации).
    -   `validation.py`: Эндпоинты для запуска валидации.

### 3. `services/`
-   **Описание:** Здесь находится бизнес-логика.
    -   `storage.py`: Сервис для работы с хранилищем (взаимодействие с `shared/minio` и `shared/repository`).

### 4. `models/`
-   **Описание:** Pydantic-модели для валидации данных.
    -   `upload.py`, `generation.py` и др.

### 5. `dependencies.py`
-   **Описание:** Общие зависимости FastAPI для всего приложения.

## Как запустить (How to Run)

### 1. Локально (для разработки)
```bash
# Перейдите в корневую директорию проекта
# Установите зависимости из requirements.txt
pip install -r requirements.txt

# Запустите uvicorn
uvicorn src.server:app --host 0.0.0.0 --port 7777 --reload
```
Приложение будет доступно по адресу `http://localhost:7777`. Флаг `--reload` обеспечит автоматическую перезагрузку при изменениях в коде.

### 2. С помощью Docker
Приложение является частью `docker-compose.yml` и запускается вместе с остальными сервисами.

```bash
docker-compose up -d app
```
Это запустит контейнер `data-generation-api`, который будет доступен на порту `7777`.
