# Shared Module

## Назначение (Purpose)

Модуль `shared` — это центральная библиотека общего кода, используемого различными компонентами платформы **FRD.ai**, включая основной API (`src`) и асинхронные воркеры (`worker`).

## Архитектура (Architecture)

Модуль `shared` построен вокруг ключевых сквозных задач (cross-cutting concerns) и доменных сервисов, которые требуются в разных частях системы. Каждый подмодуль имеет четко определенную зону ответственности.

## Основные компоненты (Core Components)

### 1. `repository/`

Этот модуль реализует **Repository Pattern** для доступа к данным. Он полностью инкапсулирует логику взаимодействия с базой данных (PostgreSQL), предоставляя чистый и типизированный API для остальной части приложения.

-   `database.py`: Настройка подключения к БД и управление сессиями.
-   `base.py`: Базовый класс репозитория с общими CRUD-операциями.
-   `dataset_repository.py`: Репозиторий для управления сущностями датасетов.
-   `models.py`: SQLAlchemy модели, описывающие таблицы в базе данных.
-   `dependencies.py`: FastAPI зависимости для предоставления сессий репозитория в эндпоинты.

### 2. `minio/`

Этот модуль предоставляет высокоуровневый клиент для взаимодействия с объектным хранилищем **MinIO**. Он абстрагирует детали работы с `boto3` или `minio-py`, предоставляя простые методы для загрузки, скачивания и управления файлами.

-   `client.py`: Основной класс клиента `MinIOClient`.
-   `models.py`: Модели данных, такие как `MinIOConfig`.
-   `dependencies.py`: FastAPI зависимость для предоставления клиента MinIO.

### 3. `llm/`

Этот модуль инкапсулирует логику взаимодействия с внешними языковыми моделями (LLM).

-   `gemini/gemini_client.py`: Клиент для работы с Google Gemini API.

## Использование (Usage)

Для использования компонентов из `shared` в других модулях (например, в `src` или `worker`), используйте абсолютные импорты.

**Пример:**

```python
# В src/routers/upload.py или worker/tasks.py

from shared.minio.client import MinIOClient
from shared.repository.dataset_repository import DatasetRepository

# ...

def my_function():
    minio = MinIOClient()
    repo = DatasetRepository()
    
    # ... использовать клиентов
```
