# Платформа frd.ai (GitOps-репозиторий)

Этот репозиторий содержит всю необходимую конфигурацию для развертывания и управления платформой `frd.ai` в Kubernetes

## Технологический стек

*   **Kubernetes (k3s):** Оркестратор контейнеров.
*   **Helm:** Менеджер пакетов для Kubernetes.
*   **ArgoCD:** Инструмент для декларативного Continuous Delivery (GitOps).

## Архитектура

Развертывание в ArgoCD построено по принципу **"App of Apps"**. Существует корневое приложение (`root-app`), которое управляет развертыванием всех остальных инфраструктурных и прикладных компонентов.

### Структура репозитория

-   `argo-apps/`: Содержит манифесты `Application` для ArgoCD.
    -   `root-app.yaml`: Главное приложение, которое является точкой входа для ArgoCD. 
    -   `apps/`: Манифесты для каждого отдельного компонента (Minio, Redis, PostgreSQL и т.д.), которыми управляет `root-app`.
-   `infra-charts/`: Содержит "вендоризированные" (скачанные и адаптированные) Helm-чарты для инфраструктурных зависимостей, таких как базы данных, брокеры сообщений и хранилища.
-   `app-charts/`: Содержит Helm-чарты для собственных приложений платформы (`FastAPI` бэкенд, `Celery` воркеры, `Streamlit` фронтенд).
-   Скрипты в корне (`argo_install.sh`, `install_k3s.sh`): Вспомогательные скрипты для быстрой установки компонентов.

## Начало работы

### Требования

1.  Работающий Kubernetes кластер (рекомендуется [k3s](https://k3s.io/)).
2.  Установленный `kubectl` и настроенный доступ к кластеру.
3.  Установленный в кластере ArgoCD.

### Развертывание

1.  **Клонируйте репозиторий:**
    ```bash
    # Текущий репозиторий:
    git clone https://github.com/ardemk606/frd.ai-platform.git
    cd frd.ai-platform
    ```

2.  **Установите ArgoCD** (если еще не установлен):
    Вы можете использовать скрипт из репозитория или следовать [официальной документации](https://argo-cd.readthedocs.io/en/stable/getting_started/).
    ```bash
    ./argo_install.sh
    ```

3.  **Примените корневое приложение:**
    Это единственная команда, которую нужно выполнить вручную. Она сообщит ArgoCD, где находится "схема" всей вашей платформы.
    ```bash
    kubectl apply -f argo-apps/root-app.yaml
    ```

4.  **Наблюдайте за синхронизацией:**
    После применения `root-app.yaml` зайдите в веб-интерфейс ArgoCD. Вы увидите, как ArgoCD автоматически начнет создавать и синхронизировать все остальные приложения (`minio`, `redis`, `postgres` и т.д.), описанные в `argo-apps/apps/`. Через несколько минут вся инфраструктура будет развернута в кластере.
