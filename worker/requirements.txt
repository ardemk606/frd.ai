# =============================================================================
# ТЯЖЕЛЫЕ ML-ЗАВИСИМОСТИ (редко меняются, устанавливаются первыми для кеширования)
# =============================================================================
torch>=2.0.0
transformers>=4.35.0
peft>=0.7.0
accelerate>=0.24.0
bitsandbytes>=0.41.3
datasets>=2.14.0

# =============================================================================
# МЕТРИКИ И ЭВАЛУАЦИЯ
# =============================================================================
evaluate>=0.4.1

# =============================================================================
# ИНФРАСТРУКТУРНЫЕ ЗАВИСИМОСТИ (могут меняться чаще)
# =============================================================================
celery==5.4.0
redis==5.0.4
psycopg2-binary
pydantic
pydantic-settings
python-dotenv
minio==7.2.7
aiohttp

# =============================================================================
# API И СЕРВИСЫ
# =============================================================================
google-generativeai
gigachat

# =============================================================================
# ОПЦИОНАЛЬНЫЕ (закомментированы для ускорения сборки)
# =============================================================================
# bitsandbytes  # Нужен только для квантизации, для CPU-worker не требуется

# Оценка качества
bert-score>=0.3.13
rouge-score>=0.1.2

# Байесовская оптимизация
optuna>=3.4.0

# Работа с данными
numpy
pandas
tqdm

# Логирование
loguru

# Токенизация и обработка
tokenizers

# MLflow (опционально)
mlflow>=2.8.0